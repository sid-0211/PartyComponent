<?xml version="1.0" encoding="UTF-8" ?>
<screen  require-authentication="anonymous-all"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="https://moqui.org/xsd/xml-screen-2.1.xsd" >
    <transition name="editPerson">

        <actions>
            <service-call name="update#Person" in-map="context" />
        </actions>

        <default-response url="/qapps/RegisterPartyScreen">
        </default-response>

    </transition>



    <actions>

        <entity-find-one entity-name="tutorial.party.Person" value-field="person">
            <field-map field-name="partyId" from="partyId"/>
        </entity-find-one>

        <!--        <set field="partyId"  from="partyId"/>-->
    </actions>
    <widgets>
        <container-box>
            <box-header title="Edit Person">
            </box-header>
            <box-body >


                <form-single name="EditPerson" transition="editPerson" >
                    <field name="partyId">
                        <default-field>
                            <hidden default-value="${partyId}"/>
                        </default-field>
                    </field>
                    <field name="partyId">
                        <default-field title="PartyId">
                            <display text="${partyId}"/>
                        </default-field>
                    </field>
                    <field name="firstName">
                        <default-field title="First Name">
                            <text-line default-value="${person.firstName}"/>
                        </default-field>
                    </field>
                    <field name="lastName">
                        <default-field title="Last Name">
                            <text-line default-value="${person.lastName}"/>
                        </default-field>
                    </field>
                    <field name="dateOfBirth">
                        <default-field title="Date Of Birth">
                            <text-line default-value="${person.dateOfBirth}"/>
                        </default-field>
                    </field>
                    <field name="submitButton">
                        <default-field title="Update">
                            <submit/>
                        </default-field>
                    </field>
                </form-single>

            </box-body>
        </container-box>
    </widgets>
</screen>